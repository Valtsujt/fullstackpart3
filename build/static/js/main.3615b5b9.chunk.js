(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),r=t(5),a=t(3),u=t(2),i=t(4),s=t.n(i),l={getAll:function(){return s.a.get("/api/persons")},addPerson:function(e){return s.a.post("/api/persons",e)},deletePerson:function(e){return s.a.delete("/api/persons/"+e.id)},updatePerson:function(e){return s.a.put("/api/persons/"+e.id,e)}},d=t(0),f=function(e){return Object(d.jsxs)("form",{onSubmit:e.hb,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{onChange:e.hnc})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{onChange:e.hnumc})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){return Object(d.jsxs)("div",{children:["filter shown with",Object(d.jsx)("input",{onChange:e.handleFilterChange})]})},m=function(e){return Object(d.jsx)("div",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(n){return Object(d.jsxs)("p",{children:[n.name," : ",n.number," ",Object(d.jsx)("button",{onClick:function(){return e.deleteFunc(n)},children:"delete"})]},n.name)}))})},j=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"notification",children:n})},h=function(e){var n=e.message;return null===n?null:Object(d.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(a.a)(o,2),s=i[0],O=i[1],p=Object(u.useState)(""),x=Object(a.a)(p,2),v=x[0],g=x[1],w=Object(u.useState)(""),k=Object(a.a)(w,2),P=k[0],C=k[1],T=Object(u.useState)(null),S=Object(a.a)(T,2),y=S[0],A=S[1],F=Object(u.useState)(null),N=Object(a.a)(F,2),D=N[0],E=N[1];return Object(u.useEffect)((function(){console.log("effect"),l.getAll().then((function(e){console.log("promise fulfilled222"),c(e.data)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(j,{message:y}),Object(d.jsx)(h,{message:D}),Object(d.jsx)(b,{handleFilterChange:function(e){C(e.target.value)}}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(f,{hb:function(e){if(e.preventDefault(),t.some((function(e){return e.name===s}))){var n=t.find((function(e){return e.name===s}));window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&(console.log("confirmed"),"id"in n===!1?l.getAll().then((function(e){l.updatePerson(Object(r.a)(Object(r.a)({},e.data.find((function(e){return e.name===n.name}))),{},{number:v})).then((function(){c(t.filter((function(e){return e.name!==s})).concat({name:s,number:v})),A("'".concat(s,"' has been edited on the phonebook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){E("'".concat(s,"' was already removed from server")),setTimeout((function(){E(null)}),5e3)}))})):l.updatePerson(Object(r.a)(Object(r.a)({},n),{},{number:v})).then((function(){c(t.filter((function(e){return e.name!==s})).concat({name:s,number:v})),A("'".concat(s,"' has been edited on the phonebook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){E("'".concat(s,"' was already removed from server")),setTimeout((function(){E(null)}),5e3)})))}else l.addPerson({name:s,number:v}).then((function(){c(t.concat({name:s,number:v})),A("'".concat(s,"' has been added to the phonenook")),setTimeout((function(){A(null)}),5e3)})).catch((function(e){E("'".concat(s,"' was already removed from server")),setTimeout((function(){E(null)}),5e3)}));console.log(t)},hnc:function(e){O(e.target.value)},hnumc:function(e){g(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(m,{persons:t,filter:P,deleteFunc:function(e){window.confirm("Delete ".concat(e.name,"?"))&&("id"in e?(l.deletePerson(e).then(c(t.filter((function(n){return n.name!==e.name})))),A("'".concat(e.name,"' has been deleted from phonebook")),setTimeout((function(){A(null)}),5e3)):l.getAll().then((function(n){l.deletePerson(n.data.find((function(n){return n.name===e.name}))).then((function(){c(t.filter((function(n){return n.name!==e.name}))),A("'".concat(e.name,"' has been deleted from phonebook")),setTimeout((function(){A(null)}),5e3)}))})))}})]})};t(39);o.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3615b5b9.chunk.js.map